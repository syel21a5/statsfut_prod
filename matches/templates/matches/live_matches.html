{% extends 'base.html' %}

{% block content %}
<div class="space-y-6">
    <!-- Header -->
    <div class="flex items-center justify-between">
        <div class="flex items-center space-x-3">
            <h1 class="text-2xl font-bold text-white">Live Matches</h1>
            <div class="flex items-center space-x-2 px-3 py-1 bg-red-500/10 rounded-full border border-red-500/20">
                <span class="relative flex h-3 w-3">
                    <span
                        class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"></span>
                    <span class="relative inline-flex rounded-full h-3 w-3 bg-red-500"></span>
                </span>
                <span class="text-xs font-semibold text-red-400">LIVE NOW</span>
            </div>
        </div>
    </div>

    {% if not matches %}
    <div class="glass-panel p-12 text-center text-gray-400">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 mx-auto mb-4 opacity-50" fill="none"
            viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        <p class="text-lg">No live matches at the moment.</p>
        <p class="text-sm mt-2 opacity-60">Check back later or view upcoming fixtures.</p>
    </div>
    {% else %}

    <div class="space-y-8">
        {% for league_name, data in grouped_matches.items %}
        <div class="space-y-4">
            <!-- League Header -->
            <div class="flex items-center space-x-3 pb-2 border-b border-white/5">
                <div class="w-1 h-6 bg-accent-500 rounded-full"></div>
                <h2 class="text-lg font-semibold text-gray-100">{{ league_name }}</h2>
            </div>

            <!-- Matches List -->
            <div class="grid gap-3">
                {% for match in data.matches %}
                <a href="{% url 'matches:match_detail' match.pk %}"
                    class="block glass-panel hover:bg-white/5 transition-colors duration-200">
                    <div class="p-4 flex items-center justify-between">

                        <!-- Status/Time -->
                        <div
                            class="w-16 flex flex-col items-center justify-center flex-shrink-0 text-red-400 font-mono text-sm">
                            <span class="animate-pulse">{{ match.status }}</span>
                            {% if match.elapsed_time %}
                            <span class="text-xs opacity-75">{{ match.elapsed_time }}'</span>
                            {% endif %}
                        </div>

                        <!-- Match Info -->
                        <div class="flex-1 flex items-center justify-around px-4">
                            <!-- Home Team -->
                            <div class="flex-1 text-right font-medium text-gray-200">
                                {{ match.home_team.name }}
                            </div>

                            <!-- Score -->
                            <div
                                class="mx-6 px-4 py-1.5 bg-black/40 rounded-lg border border-white/5 flex items-center space-x-3 font-mono text-xl font-bold">
                                <span class="text-accent-400">{{ match.home_score|default:"0" }}</span>
                                <span class="text-gray-600 text-sm">-</span>
                                <span class="text-accent-400">{{ match.away_score|default:"0" }}</span>
                            </div>

                            <!-- Away Team -->
                            <div class="flex-1 text-left font-medium text-gray-200">
                                {{ match.away_team.name }}
                            </div>
                        </div>

                        <!-- Arrow -->
                        <div class="w-8 flex justify-end text-gray-500">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20"
                                fill="currentColor">
                                <path fill-rule="evenodd"
                                    d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"
                                    clip-rule="evenodd" />
                            </svg>
                        </div>
                    </div>
                </a>
                {% endfor %}
            </div>
        </div>
        {% endfor %}
    </div>

    {% endif %}
</div>
{% endblock %}